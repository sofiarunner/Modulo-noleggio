<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modulo Richiesta Preventivo Noleggio</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Define custom colors based on the logo */
        :root {
            --runner-blue-dark: #003256; /* Main dark blue from logo */
            --runner-blue-light: #bfdbfe; /* Lighter blue for accents/backgrounds */
            --runner-blue-medium: #2563eb; /* A medium blue for interactivity */
            --runner-blue-hover: #002a4a; /* Darker blue for hover states */
            --runner-blue-gradient-start: #003256;
            --runner-blue-gradient-end: #004a7a; /* Slightly lighter dark blue for gradient end */
        }

        /* Custom styles for a more polished look */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e2e8f0; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Ensure it takes full viewport height */
            padding: 1rem; /* Add some padding for smaller screens */
        }
        .form-container {
            background-color: #ffffff;
            border-radius: 1.5rem; /* More rounded corners */
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); /* Deeper shadow */
            padding: 2.5rem; /* More padding */
            border: 1px solid #e5e7eb; /* Subtle border */
        }
        .info-icon {
            cursor: help;
            position: relative;
            display: inline-flex; /* Use flex for better alignment */
            align-items: center;
            justify-content: center;
            width: 20px; /* Make icon clickable area slightly larger */
            height: 20px;
            border-radius: 50%; /* Circular icon */
            background-color: var(--runner-blue-light); /* Light blue background for icon */
            color: var(--runner-blue-medium); /* Darker blue text for icon */
            font-weight: 700;
            font-size: 0.75rem; /* Smaller, more refined 'i' */
            transition: background-color 0.2s ease-in-out;
        }
        .info-icon:hover {
            background-color: var(--runner-blue-medium); /* Darker blue on hover */
            color: #fff;
        }
        .info-tooltip {
            visibility: hidden;
            background-color: var(--runner-blue-dark); /* Darker background for tooltip */
            color: #fff;
            text-align: center;
            border-radius: 0.5rem; /* Slightly more rounded tooltip */
            padding: 0.6rem 1rem;
            position: absolute;
            z-index: 10;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s; /* Smooth transition */
            width: 280px; /* Slightly wider tooltip */
            font-size: 0.875rem;
            line-height: 1.4;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Subtle shadow for tooltip */
        }
        .info-icon:hover .info-tooltip {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(-5px); /* Slight lift on hover */
        }
        /* Arrow for tooltip */
        .info-tooltip::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -8px; /* Adjust arrow position */
            border-width: 8px; /* Larger arrow */
            border-style: solid;
            border-color: var(--runner-blue-dark) transparent transparent transparent;
        }

        /* Custom radio button styling */
        input[type="radio"].form-radio {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            display: inline-block;
            position: relative;
            width: 1.25rem; /* 20px */
            height: 1.25rem; /* 20px */
            border-radius: 50%;
            border: 2px solid #cbd5e1; /* Light gray border */
            outline: none;
            cursor: pointer;
            transition: border-color 0.2s ease-in-out, background-color 0.2s ease-in-out;
        }
        input[type="radio"].form-radio:checked {
            border-color: var(--runner-blue-dark); /* Blue border when checked */
            background-color: var(--runner-blue-dark); /* Blue background when checked */
        }
        input[type="radio"].form-radio:checked::before {
            content: '';
            display: block;
            width: 0.5rem; /* 8px */
            height: 0.5rem; /* 8px */
            background-color: #fff; /* White dot */
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        input[type="radio"].form-radio:focus {
            box-shadow: 0 0 0 3px rgba(0, 50, 86, 0.5); /* Blue focus ring using runner-blue-dark */
        }

        /* Input field focus style */
        input[type="text"]:focus,
        textarea:focus {
            border-color: var(--runner-blue-dark); /* Blue border on focus */
            box-shadow: 0 0 0 3px rgba(0, 50, 86, 0.2); /* Soft blue glow on focus */
        }

        /* Custom button styling for gradient */
        .btn-primary-gradient {
            background-image: linear-gradient(to right, var(--runner-blue-gradient-start), var(--runner-blue-gradient-end));
        }
        .btn-primary-gradient:hover {
            background-image: linear-gradient(to right, var(--runner-blue-hover), var(--runner-blue-dark));
        }
    </style>
</head>
<body class="p-4">
    <div class="max-w-4xl w-full form-container">
        <!-- Header Section with Runner Logo -->
        <div class="text-center mb-10">
            <img src="Logo Runner BLU_R.png" alt="Logo Runner" class="mx-auto mb-4 h-20 object-contain" onerror="this.onerror=null; this.src='https://placehold.co/300x80/ffffff/003256?text=Logo%20Runner';">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-800">Modulo Richiesta Preventivo Noleggio</h1>
            <p class="text-gray-500 mt-2 text-lg">Compila i campi per ottenere una quotazione accurata.</p>
        </div>

        <form id="rentalForm" class="space-y-8">
            <!-- 1. Beni ad uso interno -->
            <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm">
                <label class="block text-xl font-semibold text-gray-800 mb-4">1. Beni ad uso interno?</label>
                <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-8">
                    <label class="inline-flex items-center group">
                        <input type="radio" name="internalUse" value="Sì" class="form-radio" checked onchange="toggleUserFields()">
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">Sì</span>
                    </label>
                    <label class="inline-flex items-center group">
                        <input type="radio" name="internalUse" value="No" class="form-radio" onchange="toggleUserFields()">
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">No</span>
                    </label>
                </div>

                <!-- Conditional fields for "No" -->
                <div id="userFields" class="mt-6 space-y-5 hidden">
                    <div>
                        <label for="ragioneSociale" class="block text-base font-medium text-gray-700 mb-2">Ragione Sociale dell'utilizzatore</label>
                        <input type="text" id="ragioneSociale" name="ragioneSociale" class="mt-1 block w-full px-5 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-[var(--runner-blue-dark)] focus:border-[var(--runner-blue-dark)] text-base" placeholder="Es. Azienda S.p.A.">
                    </div>
                    <div>
                        <label for="partitaIVA" class="block text-base font-medium text-gray-700 mb-2">Partita IVA dell'utilizzatore</label>
                        <input type="text" id="partitaIVA" name="partitaIVA" class="mt-1 block w-full px-5 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-[var(--runner-blue-dark)] focus:border-[var(--runner-blue-dark)] text-base" placeholder="Es. 12345678901">
                    </div>
                </div>
            </div>

            <!-- 2. Codici e Valore dei beni -->
            <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm">
                <label for="itemCodesValue" class="block text-xl font-semibold text-gray-800 mb-4">
                    2. Codici e Valore dei beni
                    <span class="info-icon ml-3">ⓘ
                        <span class="info-tooltip">Lista con i codici da noleggiare e il valore INCLUDENDO LA MARGINALITÀ DEL CLIENTE.</span>
                    </span>
                </label>
                <textarea id="itemCodesValue" name="itemCodesValue" rows="6" class="mt-1 block w-full px-5 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-[var(--runner-blue-dark)] focus:border-[var(--runner-blue-dark)] text-base" placeholder="Es.&#10;Codice: ABC123 - Valore: 1.500 €&#10;Codice: DEF456 - Valore: 2.000 €&#10;Codice: GHI789 - Valore: 3.200 €"></textarea>
            </div>

            <!-- Nuovo campo: 3. Valore totale merce -->
            <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm">
                <label for="totalGoodsValue" class="block text-xl font-semibold text-gray-800 mb-4">
                    3. Valore totale merce
                </label>
                <input type="number" id="totalGoodsValue" name="totalGoodsValue" class="mt-1 block w-full px-5 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-[var(--runner-blue-dark)] focus:border-[var(--runner-blue-dark)] text-base" placeholder="Es. 10000.00" step="0.01">
            </div>

            <!-- 4. Periodicità (ex 3.) -->
            <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm">
                <label class="block text-xl font-semibold text-gray-800 mb-4">4. Periodicità</label>
                <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-8">
                    <label class="inline-flex items-center group">
                        <input type="radio" name="periodicity" value="Mensile" class="form-radio" checked>
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">Mensile</span>
                    </label>
                    <label class="inline-flex items-center group">
                        <input type="radio" name="periodicity" value="Trimestrale" class="form-radio">
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">Trimestrale</span>
                    </label>
                </div>
            </div>

            <!-- 5. Durata (ex 4.) -->
            <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm">
                <label class="block text-xl font-semibold text-gray-800 mb-4">5. Durata (in mesi)</label>
                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4">
                    <label class="inline-flex items-center group">
                        <input type="radio" name="duration" value="24" class="form-radio" checked>
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">24</span>
                    </label>
                    <label class="inline-flex items-center group">
                        <input type="radio" name="duration" value="36" class="form-radio">
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">36</span>
                    </label>
                    <label class="inline-flex items-center group">
                        <input type="radio" name="duration" value="48" class="form-radio">
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">48</span>
                    </label>
                    <label class="inline-flex items-center group">
                        <input type="radio" name="duration" value="60" class="form-radio">
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">60</span>
                    </label>
                    <label class="inline-flex items-center group">
                        <input type="radio" name="duration" value="72" class="form-radio">
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">72</span>
                    </label>
                </div>
            </div>

            <!-- 6. Valore di Riacquisto (VR) (ex 5.) -->
            <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm">
                <label class="block text-xl font-semibold text-gray-800 mb-4">
                    6. Valore di Riacquisto (VR)
                    <span class="info-icon ml-3">ⓘ
                        <span class="info-tooltip">Al termine del noleggio potrai decidere se acquistare i beni al valore percentuale scelto. Non è un obbligo.</span>
                    </span>
                </label>
                <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-8">
                    <label class="inline-flex items-center group">
                        <input type="radio" name="resaleValue" value="1%" class="form-radio" checked>
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">1%</span>
                    </label>
                    <label class="inline-flex items-center group">
                        <input type="radio" name="resaleValue" value="3%" class="form-radio">
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">3%</span>
                    </label>
                    <label class="inline-flex items-center group">
                        <input type="radio" name="resaleValue" value="5%" class="form-radio">
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">5%</span>
                    </label>
                </div>
            </div>

            <!-- 7. Delega Pagamento (ex 6.) -->
            <div class="bg-gray-50 p-6 rounded-xl border border-gray-200 shadow-sm">
                <label class="block text-xl font-semibold text-gray-800 mb-4">
                    7. Delega Pagamento
                    <span class="info-icon ml-3">ⓘ
                        <span class="info-tooltip">Se selezioni 'Sì', il pagamento dei beni acquistati da Runner verrà effettuato direttamente da DLL, solo per la parte di competenza di Runner.</span>
                    </span>
                </label>
                <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-8">
                    <label class="inline-flex items-center group">
                        <input type="radio" name="paymentDelegation" value="Sì" class="form-radio" checked>
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">Sì</span>
                    </label>
                    <label class="inline-flex items-center group">
                        <input type="radio" name="paymentDelegation" value="No" class="form-radio">
                        <span class="ml-3 text-lg text-gray-700 group-hover:text-[var(--runner-blue-dark)] transition-colors duration-200">No</span>
                    </label>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="pt-8">
                <button type="submit" class="w-full btn-primary-gradient text-white font-bold py-4 px-6 rounded-xl shadow-lg transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-[var(--runner-blue-dark)] focus:ring-opacity-50 text-xl">
                    Invia Richiesta Preventivo
                </button>
            </div>
        </form>
    </div>

    <script>
        // Function to toggle visibility of user fields based on "Beni ad uso interno" selection
        function toggleUserFields() {
            const internalUseRadios = document.querySelectorAll('input[name="internalUse"]');
            const userFieldsDiv = document.getElementById('userFields');
            let isInternalUse = true;

            internalUseRadios.forEach(radio => {
                if (radio.checked && radio.value === 'No') {
                    isInternalUse = false;
                }
            });

            if (isInternalUse) {
                userFieldsDiv.classList.add('hidden');
                // Clear values when hidden
                document.getElementById('ragioneSociale').value = '';
                document.getElementById('partitaIVA').value = '';
            } else {
                userFieldsDiv.classList.remove('hidden');
            }
        }

        // Initialize the state of user fields on page load
        document.addEventListener('DOMContentLoaded', toggleUserFields);

        // Form submission handler to send email
        document.getElementById('rentalForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent default form submission

            const formData = new FormData(this);
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }

            // Format the data for the email body
            let emailBody = "Dettagli Richiesta Preventivo Noleggio:\n\n";
            emailBody += "1. Beni ad uso interno: " + (data.internalUse || 'N/D') + "\n";
            if (data.internalUse === 'No') {
                emailBody += "   Ragione Sociale dell'utilizzatore: " + (data.ragioneSociale || 'N/D') + "\n";
                emailBody += "   Partita IVA dell'utilizzatore: " + (data.partitaIVA || 'N/D') + "\n";
            }
            emailBody += "\n2. Codici e Valore dei beni (inclusa marginalità cliente):\n" + (data.itemCodesValue || 'N/D') + "\n";
            emailBody += "\n3. Valore totale merce: " + (data.totalGoodsValue || 'N/D') + " €\n"; // Added new field
            emailBody += "\n4. Periodicità: " + (data.periodicity || 'N/D') + "\n";
            emailBody += "5. Durata: " + (data.duration || 'N/D') + " mesi\n";
            emailBody += "6. Valore di Riacquisto (VR): " + (data.resaleValue || 'N/D') + "\n";
            emailBody += "7. Delega Pagamento: " + (data.paymentDelegation || 'N/D') + "\n";

            // Encode the email body for the mailto link
            const encodedBody = encodeURIComponent(emailBody);
            const emailSubject = encodeURIComponent("Richiesta Preventivo Noleggio da Modulo Web");
            const recipientEmail = "noleggio@runner.it"; // Indirizzo email aggiornato

            // Construct the mailto link
            const mailtoLink = `mailto:${recipientEmail}?subject=${emailSubject}&body=${encodedBody}`;

            // Open the mailto link
            window.location.href = mailtoLink;

            // Optionally, show a message to the user
            alert("Il tuo client di posta si aprirà con i dettagli del preventivo. Clicca 'Invia' per completare.");
        });
    </script>
</body>
</html>
